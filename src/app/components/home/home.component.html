<div>
    <div style="float:right;" class="welcome">
        <h1>Welcome {{authService.currentUser}}!</h1>
        <div class="col-sm-12">
            <img class="img-responsive" [src]="picturePath" width="130px">
            <br><br>
        </div>
        <div class="col-sm-12">
            <input text-align="right" type="file" (change)="fileChange($event)" placeholder="Upload file" accept=".png,.jpg,.gif">
        </div>
    </div>
    <br>
    <ng-container *ngIf="!authService.isAdmin">
        <div class="row">
            <div class="col-sm-12">
                <h4>These are your currently rented books. Don't forget to return them in time ! ;)</h4><br>
                <div class="mat-elevation-z2">
                    <table mat-table [dataSource]="dataSource" matSort matSortActive="orderDate" matSortDirection="asc"
                        matSortDisableClear>
                        <ng-container matColumnDef="orderDate">
                            <th class="date" mat-header-cell *matHeaderCellDef mat-sort-header> Rental Date </th>
                            <td class="date" mat-cell *matCellDef="let row"> {{row.orderDate}} </td>
                        </ng-container>
                        <ng-container matColumnDef="book.title">
                            <th class="title" mat-header-cell *matHeaderCellDef mat-sort-header> Books </th>
                            <td class="title" mat-cell *matCellDef="let row"> {{row.book.title}} </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                        </tr>
                    </table>
                    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="authService.isAdmin">
        <div>
            <div>Filter by:</div>
            <mat-form-field class="filter">
                <input matInput (keyup)="memberFilter($event.target.value)" placeholder="Member">
            </mat-form-field>
            <br>
            <mat-form-field class="filter">
                <input matInput (keyup)="bookFilter($event.target.value)" placeholder="Book">
            </mat-form-field>
            <br>
            <mat-form-field class="filter">
                <input matInput (change)="dateFilter($event.target.value)" placeholder="Rental Date" type="date">
            </mat-form-field>
            <br>
            <label>State : </label>&nbsp;&nbsp;&nbsp;&nbsp;
            <mat-radio-group name="radioButton" (change)="onChange($event)">
                <mat-radio-button value="open"> Open </mat-radio-button>&nbsp;
                <mat-radio-button value="returned"> Returned </mat-radio-button>&nbsp;
                <mat-radio-button value="all"> All </mat-radio-button>&nbsp;
            </mat-radio-group>
            <br><br>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="mat-elevation-z2">
                    <table mat-table [dataSource]="dataSourceAdmin" matSort matSortActive="orderDate" matSortDirection="asc"
                        matSortDisableClear>
                        <ng-container matColumnDef="orderDate">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Rental Date </th>
                            <td mat-cell *matCellDef="let row"> {{row.orderDate.split(' ')[0]}} </td>
                        </ng-container>
                        <ng-container matColumnDef="member.pseudo">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Member </th>
                            <td mat-cell *matCellDef="let row"> {{row.member.pseudo}} </td>
                        </ng-container>
                        <ng-container matColumnDef="book.title">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Books </th>
                            <td mat-cell *matCellDef="let row"> {{row.book.title}} </td>
                        </ng-container>
                        <ng-container matColumnDef="returnDate">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> ReturnDate </th>
                            <td mat-cell *matCellDef="let row"> {{row.returnDate | date: format: 'yyyy/mm/dd'}} </td>
                        </ng-container>
                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef> Actions </th>
                            <td class='actions-column' mat-cell *matCellDef="let row">
                                <button mat-icon-button tabindex="-1">
                                    <mat-icon (click)="edit(row)">input icon</mat-icon>
                                </button>
                                <button mat-icon-button tabindex="-1">
                                    <mat-icon (click)="delete(row)">delete</mat-icon>
                                </button>
                            </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsAdmin"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsAdmin;">
                        </tr>
                    </table>
                    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
                </div>
            </div>
        </div>
    </ng-container>